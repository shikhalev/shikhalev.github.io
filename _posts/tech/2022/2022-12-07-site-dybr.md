---
title: Дыбр сайтостроительный
description: Пара заметок по ходу дела
category:
  - tech
  - web
  - dybr
  - about
tags:
  - Jekyll
  - сайты
  - оптимизация
  - комментарии
  - shikhalev.org
---
## Оптимизация страниц

В про­цес­се работы с **[hugin.shikhalev.org][hugin]{:.img-icon-hugin-ru}** обнаружилась интересная особенность **[Jekyll][jekyll]{:.img-icon-jekyll}**,
о ко­то­рой желательно знать, чтобы не бы­ло мучительно больно...

*«Страницы»*, то есть «pages», не яв­ля­ю­щи­е­ся постами (и не вхо­дя­щие в ни­ка­кие другие коллекции) обрабатываются *крайне медленно*. Переделка
страниц в кол­лек­ции ускорила сборку сайта (локально) примерно в 10 раз — с око­ло двухсот се­кунд до ме­нее двадцати. Сначала я даже попытался
переделать их в пос­ты, но пост должен содержать дату в име­ни, и нет никакой возможности задать ему URL, соответствующий просто структуре каталогов,
без да­ты в ка­ком-ли­бо виде. Точнее, каждому посту в от­дель­нос­ти-то можно, вручную во front matter, но это уже издевательство над са­мим собой
и полный трэш в слу­чае каких-то переделок и рефакторинга. Со­з­да­ние же отдельных коллекций такой проблемы не не­сет, единственное, что понадобилось
прописать ручные адреса для фай­лов `index.md`, чтобы ссылки на них шли как ссылки на ка­та­ло­ги, а не на `in­dex.html`

## Что делать с комментариями?

Точнее, без оных... **[Heroku][heroku]{:.img-icon-heroku}** больше не да­ет бесплатно крутить **[Staticman][staticman]{:.img-icon-staticman}**, так что
комментарии здесь уже не ра­бо­та­ют. Ранее созданные, конечно, никуда не де­лись — за то и был выбран Sta­tic­man, что они хранятся внутри репозитория...

Думаю в ближайшее время подключить **[giscus][giscus]{:.img-icon-giscus}**, каковой уже испытан на [hugin.shikhalev.org][hugin], а затем как-то
решить вопрос с ав­то­ма­ти­чес­ким сохранением комментариев внутрь репозитория. Впрочем, буду рассматривать и другие варианты, может быть, за по­с­лед­нее время
появилось что-то более интересное и подходящее.

**upd:** Прикрутил **[giscus][giscus]{:.img-icon-giscus}**, но вопрос закрытым не счи­таю.

[hugin]: https://hugin.shikhalev.org
[jekyll]: https://jekyllrb.com/
[heroku]: https://www.heroku.com/
[staticman]: https://staticman.net/
[giscus]: https://giscus.app/ru
