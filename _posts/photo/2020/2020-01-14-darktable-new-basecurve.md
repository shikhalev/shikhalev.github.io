---
title: Новая базовая кривая в Darktable
category: [ photo, processing, tech, soft, graphics ]
tags:
  - Darktable
  - цвет
  - RAW
  - Linux

description: Новые возможности и нюансы модуля «Базовая кривая» в Darktable 3.0
image: /assets/img/2020-01/nbc/none-IMG_0875.jpg
---
Начинаю потихоньку изучать новые возможности в Darktable 3.0... Сегодня — довольно спорное (судя по форумам,
как минимум) нововведение в настройках базовой кривой[^basecurve] — «Сохранение цветов».

Чтобы составить собственное мнение, я взял несколько своих фотографий с настройками, отличающимися только
базовой кривой (прочие настройки — это авто-уровни и локальный контраст по умолчанию, см. пост [«Darktable —
(не очень) быстрый старт»][quickstart]). Сюжетно фотографии разные, и новая настройка проявилась на них тоже
по разному, подробности далее... Во всех случаях я сделал три варианта:

* базовая кривая отключена;

* базовая кривая включена, сохранение цветов отключено;

* базовая кривая включена, сохранение цветов включено в варианте по умолчанию (других вариантов я делать
  не стал, поскольку там уже отличия на грани различимого).

{:.note}
*Все снимки сделаны на **Canon EOS 77D**, базовая кривая — **Canon EOS** по умолчанию (не альтернативная). Как поведет
себя новый механизм на других камерах с другими базовыми кривыми — не могу знать.*

{% include local/basecurve-images.liquid file="0700" %}

<!--more-->

Что мы видим на примерах выше? В целом, картинка с сохранением цветов выглядит как нечто среднее между отсутствием
базовой кривой и кривой без сохранения. Это, в принципе, будет справедливо и для других примеров. Сама картинка
проблемная — выбито небо, причем неравномерно по цветам, отчего скатывается в циан, и сохранение цветов бережно
этот циан сохраняет (прошу прощения за тавтологичность).

А что с невыбитым небом?

{% include local/basecurve-images.liquid file="0875" %}
{% include local/basecurve-images.liquid file="1028" %}
{% include local/basecurve-images.liquid file="1081" %}


Общая суть осталась та же: цвета действительно ближе к тому, что и без базовой кривой вообще. Вот только цвета
эти — неправильные: фиолетовый оттенок небу не нужен. Итак, связка Canon EOS 77D и Darktable плохо работает
с оттенками неба (на самом деле с 600D ситуация еще хуже), базовая кривая для Canon EOS это исправляет,
а «Сохранение цветов» возвращает (сохраняет) неправильные оттенки.

Хорошо, с небом разобрались, попробуем другие сюжеты.

{% include local/basecurve-images.liquid file="0823" %}

Ну... Такое... Цвета, может быть, и более правильные, но менее веселые, что ли...

{% include local/basecurve-images.liquid file="0901" %}
{% include local/basecurve-images.liquid file="0969" %}
{% include local/basecurve-images.liquid file="0985" %}
{% include local/basecurve-images.liquid file="0990" %}
{% include local/basecurve-images.liquid file="1013" %}

Хм, а для теневых снимков результат, пожалуй, неплох: нет ненужной теплоты, как с только базовой кривой,
но и улучшение контраста налицо.

На самом деле я проверил еще и портретные фото, которые не выкладываю, поскольку лень собирать согласие
с моделей. Там картина такая: с одной стороны, ни улучшения, ни ухудшения скинтона я не заметил;
с другой — теряется, или ослабляется «эффект солнечного дня», там где он есть, примерно как и на картинке
с листьями, так что общее впечатление от фото может испортиться.

### Выводы

* Новая функция действительно сохраняет (а не меняет) цвета там, где обычная базовая кривая их улучшает,
  или «улучшает». В целом цвета становятся более спокойными.

* В каких-то случаях это хорошо.

* А в каких-то — не очень. По крайней мере в кадрах с большим количеством неба, и там, где хочется получить
  «солнечную» картинку с соответствующим настроением.

* В итоге, включать или не включать «Сохранение цветов» — сильно зависит от сюжета и задачи. Само по себе
  наличие такой возможности — это хорошо, а вот ее включение по умолчанию — под вопросом.

[^basecurve]: Базовая кривая (en, v3.4): <https://www.darktable.org/usermanual/en/module-reference/processing-modules/base-curve/>

[quickstart]: {% link _posts/photo/2019/2019-09-21-darktable-quickstart.md %} "Darktable — (не очень) быстрый старт"
