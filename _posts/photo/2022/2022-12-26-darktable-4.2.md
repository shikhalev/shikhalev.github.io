---
title: Darktable 4.2.0
description: Очередная версия Darktable, текущее состояние
category:
  - photo
  - processing
  - tech
  - soft
  - graphics
tags:
  - Darktable
  - Linux
  - RAW
  - цвет
image: /assets/img/2022-12/dt/management.png
---
{% include image.liquid place="right" width=320 src="/assets/img/2022-12/dt/dt-ny.svg" shape=true class="logo" link=false
                        title="Новогодняя иконка-логотип, взятая из файлов установленного Darktable" %}

Недавно вышла очередная версия моего любимого софта для об­ра­бот­ки raw-файлов фотографий, и я решил, что это подходящий
повод для то­го, чтобы посмотреть, а что же поменялось с то­го времени, когда я писал **[«Darktable — (не очень) быстрый старт»][start]**.
Речь там шла о вер­сии **2.6.2**, так что изменилось многое.

Вообще, версии 3.x.x развивались довольно бурно, стабилизировавшись к чет­вер­ке, и в це­лом рабочий процесс можно считать устаканившимся.
Что радует, ибо свистопляска немного утомила. Сейчас же, если мы посмотрим на [из­ме­не­ния в ре­ли­зе 4.2.0][rellog] относительно преды­ду­ще­го 4.0.1,
то увидим там плавные улучшения, доведения до ума, исправления багов и *один* новый модуль, о ко­то­ром позже. Так что именно *процесс*
принципиально не ме­ня­ет­ся.

Изменения, о ко­то­рых пойдет речь ниже, в основном появились именно в вер­си­ях 3.x, но я не бу­ду заморачиваться на по­иск конкретной версии.

<!--more-->

## Управление, коллекции

{% include image.liquid place="center" width=800 src="/assets/img/2022-12/dt/management.png" title="Скриншот основного окна в режиме обзора" %}

На скрин­шо­те можно видеть внизу тайм­лайн[^timeline] — и это очень удобное нововведение, когда нам надо пролистать какие-то старые снимки. А сле­ва
имеется модуль «Коллекции»[^collections] с дре­во­вид­ной навигацией, где, однако, можно выбирать не толь­ко да­ту/пе­ри­од, но и ка­та­лог/съем­ку, а также
использовать и другие критерии, при этом критерий выборки может быть не един­с­т­вен­ным — можно составлять сложные фильтры, объединенные логическими
операциями «И», «ИЛИ» и «КРОМЕ». Правда, если таки воспользоваться тайм­лай­ном, то и в мо­ду­ле «Коллекции» будет дерево дат, а не, скажем, каталогов...
В це­лом я бы сформулировал три основных сценария:

- Использование тайм­лай­на и дерева дат.
- Использование дерева каталогов.
- Использование *фильтрации* по на­бо­ру критериев.

Но са­мо по се­бе наличие тайм­лай­на делает первый вариант наиболее обычным.

## Изменения в модулях

Их много. Я остановлюсь только на тех модулях, которые упоминал в [«Быс­т­ром старте»][start].

Базовая кривая[^basecurve]

: Об изменениях в данном модуле я писал отдельно — [«Новая базовая кривая в Darktable»][basecurve]. Там речь идет о вер­сии 3.0,
  но с тех пор ничего не из­ме­ни­лось, по край­ней мере, с точ­ки зрения пользователя.

Локальный контраст[^localcontrast]

: Внутри модуля ничего не по­ме­ня­лось, зато появилось два пресета (профиля): *«Локальное отображение тонов HDR»* и *«Четкость»*. Второй
  вполне можно использовать как профиль по умол­ча­нию вместо «Резкости»[^sharpen], о чем я говорил в [«Быс­т­ром старте»][start] (и еще немного
  о про­фи­лях будет ниже).

Трансформации[^transforms]

: *Модуль помечен как устаревший!* Вместо него рекомендуется использовать два отдельных модуля: **«Кадрирование»**[^crop] и **«Поворот
  и пер­с­пек­ти­ва»**[^rotate]. В этом есть свой плюс — в ста­ром модуле, если мы сделали кадрирование на оп­ре­де­лен­ный размер, а затем
  выровняли горизонт, например, размер будет уже другой, что в не­ко­то­рых, хоть и нечастых, случаях может стать неприятным сюрпризом.

### Новые

Вообще новых модулей много, ниже те, которые лично мне показались интересными.

{% include image.liquid place="right" width=284 src="/assets/img/2022-12/dt/rgb-levels.png" link=false title="Модуль «Уровни RGB»" %}

Уровни RGB[^rgb_levels] и Тональная кривая RGB[^rgb_tonecurve]

: Аналоги модулей **«Уровни»**[^levels] и **«Тональная кривая»**[^tonecurve], которые работают с RGB-пред­с­та­вле­ни­ем, что означает, что они
  действют на *поз­д­них*[^order] этапах преобразования. Кроме того их суперсила в том, что они могут работать с каж­дым цветовым каналом
  по от­дель­нос­ти — как и зачем это использовать, я писал в со­от­вет­с­т­ву­ю­щем пос­те — [«Новый модуль Darktable — „Уров­ни RGB“»][rgb-levels].

Пленочная тональная кривая[^film_curve]

: В не­ко­то­ром роде замена **«Базовой кривой»**[^basecurve]. И когда ее воткнули в умол­ча­тель­ный набор и начали выстраивать от нее рабочий процесс,
  я как-то даже испугался. На мой взгляд она неудобна, но ко­му-то, вероятно, придется ко дво­ру и к ре­ша­е­мым задачам. К счас­тью, на те­ку­щий момент
  обязательным ее использование не яв­ля­ет­ся.

«S-подобная» или Sigmoid[^sigmoid]

: Чудесное название и еще более чудесный перевод его на рус­с­кий... Тот самый новый модуль, появившийся только в пос­лед­ней версии. Тоже
  позиционируется как замена «Базовой кривой» и «Пленочной тональной кривой». Бу­дет ли он мне полезен, пока сказать не мо­гу.

## Профили и умолчания

И вот тут были сделаны очень важные и полезные изменения.
Теперь в на­строй­ках[^settings] можно **выбрать** набор модулей, автоматически включающийся по умол­ча­нию. Варианты следующие:

- *Пленочная тональная кривая RGB и экспозиция*, aka *scene-referred*.
- *Базовая кривая*, aka *display-referred*.
- *Нет*.

{% include image.liquid place="center" width=700 src="/assets/img/2022-12/dt/presets.png" title="Окно настроек с выбором умолчательного набора модулей" %}

Независимо от вы­б­ран­но­го варианта будут применены *неотключаемые* модули, плюс «Баланс белого», «Восстановление пересветов» и «Ориентация».
Что отдельно приятно, вариант с «Ба­зо­вой кривой» добавляет только ее, без «Резкости» и прочего мусора.

-----

По итогу я выставил собственно вариант с «Базовой кривой» и дополнительно включил автозагрузку через профили для «Уров­ней» и «Локального контраста».

[^timeline]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/utility-modules/lighttable/timeline/>
[^collections]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/utility-modules/shared/collections/>
[^basecurve]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/base-curve/>
[^localcontrast]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/local-contrast/>
[^sharpen]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/sharpen/>
[^transforms]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/crop-rotate/>
[^crop]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/crop/>
[^rotate]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/rotate-perspective/>
[^rgb_levels]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/rgb-levels/>
[^rgb_tonecurve]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/rgb-curve/>
[^levels]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/levels/>
[^tonecurve]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/tone-curve/>
[^film_curve]: <https://docs.darktable.org/usermanual/4.0/en/module-reference/processing-modules/filmic-rgb/>
[^sigmoid]: А нету пока документации по это­му модулю.
[^order]: О по­ряд­ке модулей см. <https://docs.darktable.org/usermanual/4.0/en/special-topics/module-order/>
[^settings]: <https://docs.darktable.org/usermanual/4.0/en/preferences-settings/processing/>

[start]: {% link _posts/photo/2019/2019-09-21-darktable-quickstart.md %}
[rellog]: https://www.darktable.org/2022/12/darktable-4.2.0-released/
[basecurve]: {% link _posts/photo/2020/2020-01-14-darktable-new-basecurve.md %}
[rgb-levels]: {% link _posts/photo/2020/2020-01-17-darktable-rgb-levels.md %}
