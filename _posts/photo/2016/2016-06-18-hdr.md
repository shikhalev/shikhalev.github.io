---
title: "Пингвин-фотолюбитель: 4. HDR"
category: [ photo, processing, penguin, tech, soft, graphics ]
tags:
  - динамический диапазон
  - цвет
  - HDR
  - Linux
  - Luminance HDR

description: Создание HDR в программе Luminance HDR под Linux
image: /assets/img/2016-06/p-04/kdpv.jpg
mainline: true
---
{% include image.liquid place="center" width=800 src="/assets/img/2016-06/p-04/kdpv.jpg"
   link="https://commons.wikimedia.org/wiki/File:Goldstream_Provincial_Park_HDR_rainbow_panorama.jpg"
   caption="Картинка взята с [WikiMedia Commons](https://commons.wikimedia.org/wiki/File:Goldstream_Provincial_Park_HDR_rainbow_panorama.jpg)" %}

[**HDR** — High Dynamic Range][hdr-wiki] — термин для обозначения технологий работы с диапазоном яркости,
который превышает стандартный. Относительно любительской фотографии этим термином обычно обозначают создание
HDR-изображений из нескольких снимков обычного диапазона, а также их сведение к стандартному RGB разными
специфическими методами. Картинка сверху поста демонстрирует удачный пример применения таких технологий.

Строго говоря, RAW-файлы и 16-битные TIFF сами по себе являются HDR-изображениями, поскольку их глубина цвета
превосходит стандартную однобайтную. Однако и ее как правило недостаточно, чтобы на одном снимке запечатлеть
и яркое небо (не допустив пересветов) и какие-нибудь ближние затемненные участки. Кроме того, обычные мониторы
все равно этот диапазон полностью отобразить не способны. В отличие от человеческого глаза, который очень хорошо
адаптируется, рассматривая разные участки общей картины... К счастью, мозг при восприятии зрительной информации
тоже хорошо адаптируется, и мы можем специальными программными методами построить картинку, которая будет
выглядеть более естественно, чем просто взятая с камеры фотография. Ну, или совсем неестественно и сюрреалистично,
что тоже можно использовать в качестве выразительного средства.

Итак, нас сегодня интересует программа **[Luminance HDR][luminance]{:.img-icon-luminance-hdr}**.

<!--more-->

Первое, что нам нужно сделать, это снять несколько кадров с разной экспозицией. Например, вот таких:

{% include image.liquid place="center" width=708 src="/assets/img/2016-06/p-04/three.png" link=false class="logo" %}

Первый — типичный образец «закатной фотографии»: небо пересвечено, ближний план слишком темный. Кое-что мы при
правильной обработке из него вытянем, но пересвет вокруг солнца так и останется. Второй снят с выдержкой на два
стопа короче, а третий — на два же стопа длиннее. [Проявляем снимки посредством **Darktable** в 16-битный TIFF][mydt].

Запускаем Luminance HDR, нажимаем «Создать HDR-снимок» и добавляем наши TIFF:

{% include image.liquid place="center" width=800 src="/assets/img/2016-06/p-04/hdr-1.png" %}

Не забываем выставить галочки в группе «Выравнивание». Жмем «Далее» и ждем, пока это самое выравнивание будет выполнено.

На следующем этапе от нас требуется выбрать хитроумные параметры собственно создания HDR... Оставляем всё по умолчанию
и нажимаем «Завершить». Впрочем, есть варианты: можно радостно кинуться экспериментировать, или изучить теорию и выставить
эти параметры осознанно.

{% include image.liquid place="center" width=640 src="/assets/img/2016-06/p-04/hdr-2.png" %}

В итоге мы получаем собственно HDR-картинку. И можем ее сохранить в какой-либо из HDR форматов.

{% include image.liquid place="center" width=800 src="/assets/img/2016-06/p-04/hdr-3.jpg" %}

Вот только напрямую HDR-картинка на нашем мониторе не отображается и выглядит... невпечатляюще, скажем так.
Нужен второй этап — сведение ее в LDR (Low Dynamic Range) тем или иным способом. Доступные способы расположены
в виде мини-превьюшек справа. По нажатию на них получаем соответствующую картинку в отдельной вкладке (вкладках).

{% include image.liquid place="center" width=800 src="/assets/img/2016-06/p-04/hdr-4.jpg" %}

По умолчанию рендерится картинка архималого разрешения, чтобы получить нормальную, нужно слева выставить
«Result Size» и нажать «Tonemap». После чего понравившийся вариант сохранить.

Вот что у меня получилось более-менее интересного:

{% include image.liquid place="center" width=800 src="/assets/img/2016-06/p-04/durand.jpg" %}
{% include image.liquid place="center" width=800 src="/assets/img/2016-06/p-04/mantiuk06.jpg" %}
{% include image.liquid place="center" width=800 src="/assets/img/2016-06/p-04/mantiuk08.jpg" %}

Я, как и в случае с панорамой, снимал с рук. Штатив мог бы существенно улучшить детализацию,
да и качество снимков в целом... Но лень.

[mydt]: {% link _posts/photo/2016/2016-06-13-raw.md %}

[hdr-wiki]: https://ru.wikipedia.org/wiki/High_Dynamic_Range_Imaging
[luminance]: http://qtpfsgui.sourceforge.net/
